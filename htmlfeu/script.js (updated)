const images = document.querySelectorAll('.carousel img');
const prevBtn = document.querySelector('.prev');
const nextBtn = document.querySelector('.next');
const nameText = document.getElementById('member-name');
const navLinks = document.querySelectorAll('nav a');
const leftPanel = document.getElementById('leftPanel');

const subjects = {
  purposive: {
    title: "Purposive Communication",
    images: ["purposive(1).jpg", "purposive(2).jpg", "purposive(3).jpg"],
    desc: "In this subject, we learned how communication shapes understanding and collaboration in academic and professional contexts."
  },
  pe: {
    title: "Physical Education",
    images: ["pe(1).jpg", "pe(2).jpg", "pe(3).jpg"],
    desc: "This subject taught us teamwork, discipline, and the importance of maintaining physical fitness."
  },
  nstp: {
    title: "National Service Training Program",
    images: ["nstp(1).jpg", "nstp(2).jpg"],
    desc: "NSTP helped us develop leadership and service through community involvement."
  },
  halloween: {
    title: "Halloween",
    images: ["halloween(1).jpg", "halloween(2).jpg", "halloween(3).jpg"],
    desc: "Our Halloween event was filled with creative costumes, laughter, and unforgettable fun!"
  }
};


const events = {
  sinagtam: {
    title: "Sinag Tam",
    images: ["sinag_tam(1).jpg", "sinag_tam(2).jpg", "sinag_tam(3).jpg"]
  },
  sinagsports: {
    title: "Sinag Sports",
    images: ["sinag_sport(1).jpg", "sinag_sport(2).jpg", "sinag_sport(3).jpg"]
  },
  orientation: {
    title: "Orientation",
    images: ["orientation(1).jpg", "orientation(2).jpg"]
  }
};

const members = [
  { name: "Hi, I'm JM" },
  { name: "Hi, I'm Noel" },
  { name: "Hi, I'm Ramwil" }
];

let current = 0;

// === CAROUSEL ===
function showImage(index) {
  images.forEach((img, i) => img.classList.toggle('active', i === index));
  nameText.textContent = members[index].name;
}

prevBtn.onclick = () => {
  current = (current - 1 + images.length) % images.length;
  showImage(current);
};

nextBtn.onclick = () => {
  current = (current + 1) % images.length;
  showImage(current);
};

// === DROPDOWN ===
function toggleDropdown(event) {
  event.preventDefault();
  document.getElementById("dropdownMenu").classList.toggle("show");
}

window.onclick = (e) => {
  if (!e.target.matches('.dropbtn')) {
    document.querySelectorAll(".dropdown-content").forEach(d => d.classList.remove("show"));
  }
};

// === SUBJECT EXPANSION ===
function expandSubject(subjectKey) {
  const s = subjects[subjectKey];
  if (!s) return;

  // example descriptions per image
  const descriptions = {
    purposive: [
      "Discussing communication models in class.",
      "Collaborative learning during group work.",
      "Reflecting on how communication affects understanding."
    ],
    pe: [
      "Staying active through team sports.",
      "Enjoying our PE warm-up exercises.",
      "Practicing good sportsmanship and teamwork."
    ],
    nstp: [
      "Serving the community through outreach programs.",
      "Building teamwork during NSTP activities."
    ],
    halloween: [
      "Spooky fun with classmates!",
      "Costume prep before the event.",
      "Our Halloween celebration filled with laughter!"
    ]
  };

  document.body.classList.add('full-green');
  leftPanel.classList.add('expanded');
  navLinks.forEach(link => link.classList.add('nav-yellow'));

  const photosHTML = s.images
    .map((src, i) => `
      <div class="subject-photo-container">
        <img src="${src}" 
             alt="${s.title}" 
             class="subject-photo" 
             onclick="enlargeSubjectPhoto('${src}', '${descriptions[subjectKey][i]}')">
      </div>
    `)
    .join("");

  leftPanel.innerHTML = `
    <div class="expanded-content">
      <button class="close-btn" onclick="closeExpanded()">✕</button>
      <h2>${s.title}</h2>
      <div class="subject-photos">${photosHTML}</div>
      <p class="subject-description">${s.desc}</p>
    </div>
  `;
}


// === SUBJECT ENLARGEMENT (SMALL INSIDE GREEN DIV) ===
// === SUBJECT ENLARGEMENT (ZOOM-IN POPUP WITH DESCRIPTION) ===
function enlargeSubjectPhoto(src, desc) {
  const existing = document.querySelector(".subject-enlarge");
  if (existing) existing.remove();

  const overlay = document.createElement("div");
  overlay.className = "subject-enlarge";
  overlay.innerHTML = `
    <div class="subject-enlarge-box">
      <button class="photo-close-inside" onclick="this.closest('.subject-enlarge').remove()">✕</button>
      <img src="${src}" alt="Subject Photo" class="subject-enlarge-img">
    <div class="subject-description">
  <p>${desc}</p>
</div>
      </div>
    </div>
  `;
  document.body.appendChild(overlay);
}

// === EVENT EXPANSION (SINAG TAM, SPORTS, ORIENTATION) ===
function expandEvent(eventKey) {
  const e = events[eventKey];
  if (!e) return;
  document.body.classList.remove("full-yellow");


  document.body.classList.add("full-green");
  leftPanel.classList.add("expanded");
 navLinks.forEach(link => {
  link.classList.remove("nav-yellow");
  link.style.color = "#f9e547"; // bright yellow for green background
});

  const photosHTML = e.images
    .map(
      src => `
      <img src="${src}" alt="${e.title}" 
      class="event-photo" 
      style="width:250px;height:250px;border-radius:10px;margin:10px;cursor:pointer;transition:transform 0.3s;"
      onmouseover="this.style.transform='scale(1.05)'"
      onmouseout="this.style.transform='scale(1)'"
      onclick="enlargeEventPhoto('${src}', '${e.title}')">`
    )
    .join("");

  leftPanel.innerHTML = `
    <button class="close-btn" onclick="closeExpanded()">✕</button>
    <div class="expanded-content">
      <h2>${e.title}</h2>
      <div style="display:flex;flex-wrap:wrap;justify-content:center;gap:20px;margin-top:20px;">
        ${photosHTML}
      </div>
    </div>`;
}

// === ENLARGE EVENT PHOTO (FULLSCREEN FIXED OVERLAY) ===
function enlargeEventPhoto(src, title) {
  const overlay = document.createElement('div');
  overlay.className = 'photo-overlay';
  overlay.innerHTML = `
    <div class="photo-box fade-in">
      <button class="photo-close" aria-label="Close" onclick="this.closest('.photo-overlay').remove()">✕</button>
      <img src="${src}" alt="${title}">
    </div>`;
  document.body.appendChild(overlay);
}


// === CLOSE PANELS ===
function closeExpanded() {
  document.body.classList.remove("full-green", "full-yellow");
  leftPanel.classList.remove("expanded", "expanded-small");

  leftPanel.innerHTML = `
    <div class="content-left">
      <img src="logo.png" alt="logo" class="logo">
      <h1>Tam Collection</h1>
      <p>A collection of our experience during our stay at FEU Roosevelt Marikina.</p>
    </div>`;

  navLinks.forEach(link => (link.style.color = "#1a4731"));
  
}

document.getElementById("aboutBtn").onclick = () => {
  // remove all layout state classes
  document.body.classList.remove("full-green");
  leftPanel.classList.remove("expanded", "expanded-small");
  
  // back to yellow theme
  document.body.classList.add("full-yellow");

  // restore default left panel content
  leftPanel.innerHTML = `
    <div class="content-left">
      <img src="logo.png" alt="logo" class="logo">
      <h1>About Tam Collection</h1>
      <p>Welcome to our website! Here we share our memorable experiences, events, and milestones at FEU Roosevelt Marikina.</p>
    </div>
  `;

  // ibalik din ang kulay ng navbar kung kailangan
  navLinks.forEach(link => link.style.color = "#1a4731");
};
// === EVENT LINKS ===
document.querySelectorAll("#dropdownMenu a").forEach(link => {
  link.addEventListener("click", (e) => {
    e.preventDefault();
    const eventName = link.textContent.trim().toLowerCase().replace(" ", "");
    expandEvent(eventName);
  });
});

document.addEventListener("click", (e) => {
  if (e.target.id === "homeBtn") {
    e.preventDefault();
    closeExpanded();
  }
});
